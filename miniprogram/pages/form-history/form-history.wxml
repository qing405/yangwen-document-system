<!--pages/form-history/form-history.wxml-->
<view class="container">
  <!-- é¡µé¢æ ‡é¢˜ -->
  <view class="page-header">
    <view class="page-title">æäº¤å†å²</view>
    <view class="page-subtitle">{{formTitle}}</view>
  </view>

  <!-- å†å²è®°å½•åˆ—è¡¨ -->
  <view class="history-list">
    <view wx:if="{{submissions.length === 0 && !loading}}" class="empty-state">
      <view class="empty-icon">ğŸ“Š</view>
      <view class="empty-text">æš‚æ— æäº¤è®°å½•</view>
    </view>
    
    <view wx:else>
      <view 
        class="history-item list-item" 
        wx:for="{{submissions}}" 
        wx:key="_id"
        bindtap="onViewSubmission"
        data-id="{{item._id}}"
      >
        <view class="list-item-content">
          <view class="list-item-title">æäº¤ #{{item.submissionId}}</view>
          <view class="list-item-desc">
            <text class="text-muted">æäº¤äººï¼š{{item.submitterName}}</text>
            <text class="text-muted">{{item.submittedAt}}</text>
          </view>
          <view class="list-item-meta">
            <text class="tag tag-success">å·²å®Œæˆ</text>
            <text class="text-muted">å­—æ®µæ•°ï¼š{{item.fieldCount || 0}}</text>
          </view>
        </view>
        <view class="list-item-arrow">
          <text class="arrow-icon">></text>
        </view>
      </view>
    </view>
  </view>

  <!-- åŠ è½½æ›´å¤š -->
  <view wx:if="{{loading}}" class="loading">
    <text>åŠ è½½ä¸­...</text>
  </view>
  
  <view wx:if="{{!hasMore && submissions.length > 0}}" class="no-more">
    <text>æ²¡æœ‰æ›´å¤šäº†</text>
  </view>
</view>
