<!--pages/submission-detail/submission-detail.wxml-->
<view class="container">
  <!-- é¡µé¢æ ‡é¢˜ -->
  <view class="page-header">
    <view class="page-title">æäº¤è¯¦æƒ…</view>
    <view class="page-subtitle" wx:if="{{submissionId}}">æäº¤ #{{submissionId}}</view>
  </view>

  <!-- åŠ è½½çŠ¶æ€ -->
  <view wx:if="{{loading}}" class="loading">
    <view class="loading-icon">â³</view>
    <text>åŠ è½½ä¸­...</text>
  </view>

  <!-- é”™è¯¯çŠ¶æ€ -->
  <view wx:elif="{{error}}" class="error-state">
    <view class="error-icon">âŒ</view>
    <view class="error-text">{{error}}</view>
    <view class="error-actions">
      <button class="btn btn-primary" bindtap="onRetry">é‡è¯•</button>
      <button class="btn btn-secondary" bindtap="onBack">è¿”å›</button>
    </view>
  </view>

  <!-- æäº¤è¯¦æƒ… -->
  <view wx:elif="{{submission}}" class="submission-detail">
    <!-- åŸºæœ¬ä¿¡æ¯ -->
    <view class="section">
      <view class="section-title">åŸºæœ¬ä¿¡æ¯</view>
      <view class="info-list">
        <view class="info-item">
          <text class="info-label">æäº¤æ—¶é—´ï¼š</text>
          <text class="info-value">{{submission.submittedAt || 'æœªçŸ¥'}}</text>
        </view>
        <view class="info-item">
          <text class="info-label">æäº¤äººï¼š</text>
          <text class="info-value">{{submission.submitterName || 'æœªçŸ¥'}}</text>
        </view>
        <view class="info-item">
          <text class="info-label">çŠ¶æ€ï¼š</text>
          <text class="info-value">
            <text class="tag tag-success">å·²å®Œæˆ</text>
          </text>
        </view>
      </view>
    </view>

    <!-- è¡¨å•æ•°æ® -->
    <view class="section" wx:if="{{submission.formData && submission.formData.length > 0}}">
      <view class="section-title">è¡¨å•æ•°æ®</view>
      <view class="form-data">
        <view 
          class="data-item" 
          wx:for="{{submission.formData}}" 
          wx:key="field"
        >
          <view class="data-label">{{item.label || item.field}}</view>
          <view class="data-value">{{item.value || 'æœªå¡«å†™'}}</view>
        </view>
      </view>
    </view>

    <!-- æ— è¡¨å•æ•°æ®æç¤º -->
    <view class="section" wx:else>
      <view class="section-title">è¡¨å•æ•°æ®</view>
      <view class="empty-data">
        <text>æš‚æ— è¡¨å•æ•°æ®</text>
      </view>
    </view>

    <!-- æ“ä½œæŒ‰é’® -->
    <view class="action-buttons">
      <button class="btn btn-secondary" bindtap="onBack">è¿”å›</button>
    </view>
  </view>

  <!-- é»˜è®¤çŠ¶æ€ -->
  <view wx:else class="default-state">
    <view class="default-icon">ğŸ“„</view>
    <view class="default-text">æäº¤è®°å½•ä¸å­˜åœ¨</view>
    <button class="btn btn-primary" bindtap="onBack">è¿”å›</button>
  </view>
</view>
