# 原料文档管理系统

## 项目简介

这是一个基于微信小程序和云开发的原料文档管理系统，提供文档管理、表单填写、提交记录等功能。系统采用现代化的UI设计，支持响应式布局，专为移动端优化。

## 功能特性

### 📄 文档管理
- 文档上传、查看、下载
- 支持多种文档格式
- 文档分类和标签管理
- 访问权限控制

### 📝 表单管理
- 表单创建和编辑
- 多种字段类型支持（文本、选择、评分、文件等）
- 表单模板系统
- 表单预览和发布

### 📋 任务管理
- 表单任务分派
- 任务进度查询
- 状态跟踪和统计
- 协作编辑支持

### 👤 用户管理
- 用户注册、登录、权限管理
- 角色分级（管理员、车间长、操作员）
- 在线状态显示
- 协作状态管理

### 📊 数据统计
- 系统使用情况统计
- 任务完成率统计
- 实时数据更新
- 趋势分析

## 技术架构

### 前端技术
- **框架**: 微信小程序
- **UI组件**: 自定义图标组件系统
- **样式**: CSS3 + Flexbox/Grid布局
- **状态管理**: 页面级状态管理

### 后端技术
- **平台**: 微信云开发
- **数据库**: 云数据库
- **存储**: 云存储
- **函数**: 云函数

### 设计系统
- **色彩系统**: 深蓝色主题 (#0D1F3C, #1E3A68, #007BFF)
- **图标系统**: 专业SVG图标库
- **响应式设计**: 移动端优先的适配策略

## 项目结构

```
├── cloudfunctions/          # 云函数
│   └── quickstartFunctions/ # 主要业务逻辑
├── miniprogram/            # 小程序前端
│   ├── pages/              # 页面文件
│   ├── components/         # 组件
│   │   └── icon/          # 图标组件
│   ├── images/            # 图片资源
│   │   └── icons/         # SVG图标系统
│   └── app.js             # 小程序入口
└── README.md              # 项目说明
```

## 图标系统

本项目采用专业的SVG图标系统，基于统一的设计规范：

### 色彩系统
- **主色**: `#0D1F3C` - 导航栏背景、重要文字
- **辅助色**: `#1E3A68` - 功能图标、次要文字
- **强调色**: `#007BFF` - 激活状态、按钮、链接
- **状态色**: 
  - 成功: `#52C41A`
  - 警告: `#FAAD14`
  - 错误: `#FF4D4F`

### 图标分类
- **导航图标**: 首页、文档、表单、个人中心
- **功能图标**: 文档中心、台账管理、用户管理、数据统计
- **状态图标**: 成功、警告、错误状态

### 使用方法
```xml
<!-- 使用图标组件 -->
<icon name="documents" size="32" color="#1E3A68"></icon>
<icon name="success" size="24" color="#52C41A"></icon>
```

详细说明请查看：[图标系统使用说明](miniprogram/images/icons/README.md)

## 核心功能模块

### 1. 表单中心 (Forms Center)

#### 主要功能
- **协作表单**: 在线协作填写表单
- **分派任务**: 将表单分配给指定用户
- **查询任务**: 实时跟踪任务进度和状态

#### 设计特色
- 深蓝色渐变背景，白色文字，提供良好对比度
- 半透明效果和现代感设计
- 响应式布局，适配不同屏幕尺寸
- 触摸友好的交互设计

#### 移动端优化
- 头部区域：padding 20px 16px 24px
- 功能按钮：padding 18px 14px，图标 44px
- 统计概览：padding 20px，卡片间距 12px
- 字体大小：标题 22px，副标题 13px

### 2. 表单编辑器 (Form Editor)

#### 字段类型支持
- **基础字段**: 单行文本、多行文本、数字、邮箱、手机号
- **选择字段**: 下拉选择、单选、多选
- **特殊字段**: 日期、时间、评分、文件上传

#### 协作功能
- 实时协作状态显示
- 协作者头像和状态
- 最后更新时间显示
- 脉冲动画效果

#### 拖拽功能
- 边界检查和限制
- 吸附对齐功能
- 放置区域视觉反馈
- 性能优化

### 3. 模板中心 (Template Center)

#### 分类系统
- 问卷调查、报名登记、意见反馈
- 申请表单、订单表单、自定义表单
- 横向滚动支持

#### 布局设计
- 网格布局，每行3个模板卡片
- 响应式设计支持
- 卡片间距和阴影优化
- 悬停时显示操作按钮

#### 搜索筛选
- 关键词搜索
- 类型和场景筛选
- 排序选项（最受欢迎、最新发布、评分最高、使用最多）

### 4. 任务管理 (Task Management)

#### 任务分派
- 表单和用户选择
- 截止日期设置
- 优先级管理
- 通知设置

#### 任务查询
- 状态筛选（进行中、已完成、逾期）
- 优先级筛选
- 列表/网格视图切换
- 实时状态更新

## 设计系统

### 色彩规范
- **主色**: `#0D1F3C` - 导航栏背景、重要文字
- **辅助色**: `#1E3A68` - 功能图标、次要文字
- **强调色**: `#007BFF` - 激活状态、按钮、链接
- **状态色**: 
  - 成功: `#52C41A`
  - 警告: `#FAAD14`
  - 错误: `#FF4D4F`

### 响应式设计
- 移动端优先的设计理念
- 支持不同屏幕尺寸
- 触摸友好的交互设计
- 流畅的动画过渡

### 组件化架构
- 模块化的代码结构
- 可复用的组件设计
- 清晰的职责分离

## 安装和运行

### 1. 环境准备

- 安装微信开发者工具
- 注册微信小程序账号
- 开通云开发服务

### 2. 项目配置

1. 在微信开发者工具中导入项目
2. 在 `app.js` 中配置云环境ID
3. 在云开发控制台创建数据库集合

### 3. 云函数部署

```bash
# 进入云函数目录
cd cloudfunctions/quickstartFunctions

# 安装依赖
npm install

# 在微信开发者工具中右键云函数，选择"上传并部署"
```

### 4. 编译运行

在微信开发者工具中点击"编译"按钮，等待编译完成。

## 登录说明

系统提供了默认的测试账号，可以直接使用：

1. **管理员账号**：
   - 工号：`044081`
   - 密码：`123456`
   - 角色：管理员

2. **车间长账号**：
   - 工号：`044082`
   - 密码：`123456`
   - 角色：车间长

3. **操作员账号**：
   - 工号：`044083`
   - 密码：`123456`
   - 角色：操作员

## 常见问题解决

### 编译后无法进入页面

如果遇到编译后无法进入页面的问题，请按以下步骤排查：

#### 1. 检查登录状态

最常见的原因是用户未登录。系统会自动跳转到登录页面，请使用上述测试账号登录。

#### 2. 检查页面路由配置

确保页面已在 `app.json` 中正确配置：

```json
{
  "pages": [
    "pages/login/login",
    "pages/index/index",
    "pages/submission-detail/submission-detail",
    // ... 其他页面
  ]
}
```

#### 3. 检查页面文件完整性

确保每个页面都有完整的四个文件：
- `.js` - 页面逻辑
- `.wxml` - 页面结构
- `.wxss` - 页面样式
- `.json` - 页面配置

#### 4. 检查云函数配置

确保云函数已正确部署，环境ID配置正确：

```javascript
// app.js
wx.cloud.init({
  env: "your-env-id",
  traceUser: true,
});
```

#### 5. 检查控制台错误

在微信开发者工具的控制台中查看是否有错误信息，特别注意：
- 网络请求错误
- 云函数调用失败
- 页面跳转错误

### 其他常见问题

#### 云函数调用失败

1. 检查云函数是否已部署
2. 检查环境ID是否正确
3. 检查云函数代码是否有语法错误

#### 数据库操作失败

1. 检查数据库集合是否已创建
2. 检查数据库权限设置
3. 检查数据格式是否正确

#### 页面显示异常

1. 检查WXML语法是否正确
2. 检查数据绑定是否正确
3. 检查样式文件是否有语法错误

## 开发指南

### 添加新页面

1. 在 `pages` 目录下创建新页面文件夹
2. 创建四个基本文件（.js, .wxml, .wxss, .json）
3. 在 `app.json` 中添加页面路径
4. 实现页面逻辑和样式

### 添加新云函数

1. 在云函数中添加新的 case 分支
2. 实现对应的处理函数
3. 在小程序端调用云函数

### 添加新图标

1. 创建SVG文件，遵循设计规范
2. 在 `components/icon/icon.js` 中添加图标映射
3. 更新图标文档
4. 测试图标显示效果

### 数据库设计

主要数据集合：
- `users` - 用户信息
- `documents` - 文档信息
- `forms` - 表单定义
- `submissions` - 表单提交记录

## 贡献指南

1. Fork 项目
2. 创建功能分支
3. 提交更改
4. 推送到分支
5. 创建 Pull Request

## 许可证

MIT License

## 联系方式

如有问题，请通过以下方式联系：
- 提交 Issue
- 发送邮件
- 微信联系

---

*最后更新: 2024年12月*

